/*
This stylesheet defines Return's bhadralok gothic design system.
It exists separately from behavior code so typography, spacing, and visual hierarchy can evolve
without changing domain logic in JavaScript.
It styles the shell in `newtab.html` and class hooks emitted by `src/main.js`, using a parchment-forward
palette with deep ink text, monumental serif hierarchy, and softly irregular structural seams.
The atmosphere evokes old Calcutta study rooms and print-era desks, where paper stays warm and bright
while language appears in high-contrast dark strokes.
*/

@font-face {
  font-family: "Newsreader";
  src: url("fonts/Newsreader-Variable.ttf") format("truetype");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "IBM Plex Sans";
  src: url("fonts/IBMPlexSans-Regular.ttf") format("truetype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "IBM Plex Sans";
  src: url("fonts/IBMPlexSans-Medium.ttf") format("truetype");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "IBM Plex Sans";
  src: url("fonts/IBMPlexSans-SemiBold.ttf") format("truetype");
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

:root {
  --font-heading: "Newsreader", "Garamond", "EB Garamond", "Adobe Garamond Pro", "Times New Roman", serif;
  --font-body: "Newsreader", "Garamond", "EB Garamond", "Adobe Garamond Pro", "Times New Roman", serif;
  --font-ui: "IBM Plex Sans", -apple-system, system-ui, sans-serif;

  /* Palette is intentionally inverted so text remains darker than every working surface. */
  --color-paper: #d8cebd;
  --color-paper-alt: #e1d7c7;
  --color-surface: #e9dece;
  --color-ink: #211712;
  --color-ink-muted: #68584d;
  --color-accent: #170f0b;
  --color-accent-soft: rgba(33, 23, 18, 0.08);
  --color-line: #c6b9a6;
  --color-line-strong: #aa9984;
  --color-line-soft: rgba(33, 23, 18, 0.08);
  --color-action-highlight: rgba(38, 25, 18, 0.08);
  --color-action-highlight-strong: rgba(38, 25, 18, 0.14);
  --color-project-highlight: rgba(52, 34, 24, 0.15);
  --color-project-highlight-strong: rgba(52, 34, 24, 0.22);
  --color-project-band: rgba(33, 23, 18, 0.08);
  --color-project-band-strong: rgba(33, 23, 18, 0.12);
  --color-project-rail: rgba(28, 19, 14, 0.3);
  --color-project-ink-strong: #170f0b;
  --project-motion-duration: 140ms;
  --project-motion-ease: ease-out;

  --radius-s: 4px;
  --radius-m: 6px;
  --radius-l: 8px;

  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 28px;
  --space-7: 30px;
  --space-8: 8px;
  --campaign-card-min-width: 300px;

  --sidebar-open-width: 204px;
  --sidebar-closed-width: 54px;
  --focus-ring: 2px solid rgba(24, 15, 10, 0.38);
}

* {
  box-sizing: border-box;
}

html,
body {
  width: 100%;
  height: 100%;
  margin: 0;
}

body {
  font-family: var(--font-body);
  font-weight: 450;
  font-size: 15px;
  line-height: 1.65;
  color: var(--color-ink);
  background: radial-gradient(ellipse at 52% 38%, #ece1d1 0%, var(--color-paper) 70%);
  overflow: hidden;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 38%, rgba(54, 37, 26, 0.16) 100%);
  pointer-events: none;
  z-index: 999;
}

::selection {
  background: rgba(63, 42, 30, 0.68);
  color: #f6f0e8;
}

#app-shell {
  width: 100%;
  height: 100%;
  /* Outer margins are intentionally minimal so the board uses the full new-tab viewport. */
  padding: 4px 8px 0;
  display: grid;
  grid-template-columns: var(--sidebar-open-width) minmax(0, 1fr);
  gap: 12px;
  position: relative;
}

body.is-sidebar-collapsed #app-shell {
  grid-template-columns: var(--sidebar-closed-width) minmax(0, 1fr);
}

/* Sidebar behaves like a quiet page margin rather than a control console. */
.side-bar {
  position: relative;
  height: 100%;
  border-radius: var(--radius-l);
  border: none;
  background: #ddd1c0;
  padding: 10px 10px 9px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow: hidden;
}

.side-bar::before,
.side-bar::after {
  content: "";
  position: absolute;
  inset: 0;
  border: 1px solid rgba(29, 20, 15, 0.1);
  border-radius: var(--radius-l);
  pointer-events: none;
}

.side-bar::before {
  transform: translate(0.65px, -0.5px) rotate(-0.22deg);
}

.side-bar::after {
  inset: 1px;
  transform: translate(-0.55px, 0.6px) rotate(0.19deg);
  opacity: 0.9;
}

.side-bar > * {
  position: relative;
  z-index: 1;
}

.side-head {
  display: flex;
  align-items: flex-start;
  gap: var(--space-2);
}

.sidebar-toggle {
  width: 30px;
  min-width: 30px;
  height: 30px;
  border-radius: var(--radius-s);
  border: 0;
  background: transparent;
  color: var(--color-accent);
  font-family: var(--font-ui);
  font-size: 0.84rem;
  font-weight: 600;
  line-height: 1;
  cursor: pointer;
  transition: background-color 120ms ease;
}

.sidebar-toggle:hover:not(:disabled) {
  background: var(--color-action-highlight-strong);
}

.brand-block {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.brand-block h1 {
  margin: 0;
  font-family: var(--font-heading);
  font-size: 1.3rem;
  font-weight: 780;
  line-height: 1.05;
  letter-spacing: 0.06em;
  font-variant-caps: small-caps;
  text-shadow: 0 1px 0 rgba(255, 246, 234, 0.95);
  color: var(--color-accent);
  padding-bottom: 3px;
  border-bottom: 1px solid rgba(29, 20, 15, 0.14);
}

.brand-block p {
  margin: 0;
  font-family: var(--font-ui);
  color: var(--color-ink-muted);
  font-size: 0.72rem;
  line-height: 1.35;
}

.side-section {
  border: 0;
  border-radius: 0;
  background: transparent;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.primary-actions {
  /* Group boundaries are separators, not nested boxes, to keep the column visually calm. */
  margin-top: 2px;
  padding-top: 8px;
  border-top: 1px solid rgba(29, 20, 15, 0.1);
}

/* Secondary actions remain one-click visible instead of hiding behind overflow controls. */
.secondary-actions {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(29, 20, 15, 0.1);
}

button {
  border: 1px solid var(--color-line-strong);
  border-radius: var(--radius-s);
  background: transparent;
  color: var(--color-ink);
  font-family: var(--font-body);
  font-size: 0.94rem;
  font-weight: 600;
  line-height: 1.4;
  padding: 7px 10px;
  cursor: pointer;
  transition: background-color 120ms ease, border-color 120ms ease, color 120ms ease;
}

/* Sidebar controls intentionally avoid boxed chrome and rely on text + highlight rhythm. */
.side-action {
  position: relative;
  width: 100%;
  border: 0;
  background: transparent;
  padding: 7px 6px;
  border-radius: var(--radius-s);
  display: flex;
  align-items: center;
  gap: 8px;
  text-align: left;
  font-family: var(--font-ui);
  font-size: 0.82rem;
  font-weight: 500;
  line-height: 1.25;
  color: var(--color-ink);
  transition: transform 120ms ease;
}

.side-action::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 52%;
  height: 70%;
  transform: translateY(-50%) rotate(-0.18deg);
  border-radius: 3px;
  background: var(--color-action-highlight);
  opacity: 0;
  transition: opacity 120ms ease, background-color 120ms ease;
  pointer-events: none;
}

.side-action:hover::before,
.side-action:focus-visible::before {
  opacity: 1;
}

.side-action:active {
  transform: translateY(0.5px);
}

.side-action-icon,
.side-action-label {
  position: relative;
  z-index: 1;
}

.side-action-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  min-width: 20px;
  color: var(--color-accent);
}

.side-action-icon svg {
  width: 16px;
  height: 16px;
  stroke: currentColor;
  fill: none;
  stroke-width: 1.3;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.side-action-label {
  white-space: nowrap;
}

.side-action:hover:not(:disabled),
.side-action:active:not(:disabled) {
  background: transparent;
  border-color: transparent;
}

button:hover:not(:disabled) {
  background: var(--color-action-highlight);
  border-color: rgba(29, 20, 15, 0.3);
}

button:active:not(:disabled) {
  background: var(--color-action-highlight-strong);
}

button:disabled {
  cursor: not-allowed;
  opacity: 0.54;
}

button:focus-visible,
select:focus-visible,
input:focus-visible,
[contenteditable="true"]:focus-visible {
  outline: var(--focus-ring);
  outline-offset: 1px;
}

.device-pref-control {
  display: none;
}

body.is-sidebar-collapsed .side-bar {
  padding: 8px 6px 7px;
  align-items: stretch;
}

body.is-sidebar-collapsed .brand-block {
  display: none;
}

body.is-sidebar-collapsed .side-head {
  width: 100%;
  justify-content: center;
}

body.is-sidebar-collapsed .side-section {
  width: 100%;
}

body.is-sidebar-collapsed .side-action {
  justify-content: center;
  padding: 7px 0;
}

body.is-sidebar-collapsed .side-action-label {
  display: none;
}

body.is-sidebar-collapsed .side-action-icon {
  width: auto;
  min-width: auto;
}

body.is-sidebar-collapsed .side-action-icon svg {
  width: 17px;
  height: 17px;
}

body.is-sidebar-collapsed .sidebar-toggle {
  border: 0;
  background: transparent;
}

/* The board remains a six-section composition with generous page-like gutters. */
#canvas {
  height: 100%;
  min-height: 0;
  display: grid;
  /* Two columns remain fixed, but each card now keeps a width floor before text becomes too cramped. */
  grid-template-columns: repeat(2, minmax(var(--campaign-card-min-width), 1fr));
  /* Rows size from content, while each card keeps its own baseline min-height floor. */
  grid-auto-rows: auto;
  align-items: start;
  gap: 24px;
  overflow-x: hidden;
  overflow-y: auto;
  padding: 6px 2px 20px;
  background-image: linear-gradient(
    to right,
    transparent calc(50% - 0.5px),
    rgba(35, 24, 17, 0.08) calc(50% - 0.5px),
    rgba(35, 24, 17, 0.08) calc(50% + 0.5px),
    transparent calc(50% + 0.5px)
  );
}

/* Board and panel share one scrollbar treatment so overflow surfaces feel like the same artifact. */
#canvas::-webkit-scrollbar,
#panel-root::-webkit-scrollbar {
  width: 5px;
}

#canvas::-webkit-scrollbar-track,
#panel-root::-webkit-scrollbar-track {
  background: transparent;
}

#canvas::-webkit-scrollbar-thumb,
#panel-root::-webkit-scrollbar-thumb {
  background: rgba(67, 45, 31, 0.22);
  border-radius: 3px;
}

#canvas::-webkit-scrollbar-thumb:hover,
#panel-root::-webkit-scrollbar-thumb:hover {
  background: rgba(67, 45, 31, 0.32);
}

.campaign-card {
  position: relative;
  border-radius: var(--radius-l);
  border: none;
  background: var(--color-surface);
  padding: 14px 20px 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 200px;
  box-shadow: 0 7px 18px rgba(43, 29, 20, 0.14), inset 0 1px 0 rgba(255, 247, 236, 0.58);
  transition: box-shadow 200ms ease, transform 200ms ease;
  /* Explicit content-sized height prevents grid stretch behavior from hiding overflow growth. */
  height: max-content;
  align-self: start;
  /* Mission menus are allowed to extend outside card flow without clipping. */
  overflow: visible;
}

/* We layer two slightly offset strokes so campaign cards read as hand-drawn outlines. */
.campaign-card::before,
.campaign-card::after {
  content: "";
  position: absolute;
  inset: 0;
  border: 1px solid rgba(30, 20, 15, 0.1);
  border-radius: var(--radius-l);
  pointer-events: none;
}

.campaign-card::before {
  transform: translate(0.8px, -0.6px) rotate(-0.23deg);
}

.campaign-card::after {
  inset: 1px;
  transform: translate(-0.7px, 0.7px) rotate(0.2deg);
  opacity: 0.92;
}

.campaign-card > * {
  position: relative;
  z-index: 1;
}

.campaign-card:hover {
  box-shadow: 0 16px 32px rgba(35, 24, 17, 0.24), 0 0 54px rgba(76, 50, 36, 0.1), 0 0 1px rgba(30, 20, 14, 0.22);
  transform: translateY(-2px);
  z-index: 2;
}

.campaign-card-header {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: start;
  gap: var(--space-3);
}

.campaign-title {
  /* Campaign emphasis stays subtle by using the same family with tuned weight/spacing. */
  margin: 0;
  padding: 0 2px;
  border-radius: var(--radius-s);
  font-family: var(--font-heading);
  font-size: 1.74rem;
  font-weight: 760;
  line-height: 1.02;
  letter-spacing: 0.012em;
  font-variation-settings: "wght" 760;
  /* Keep lift visible on warm parchment backgrounds without introducing a dramatic glow. */
  text-shadow: 0 1px 0 rgba(255, 245, 233, 0.74), 0 2px 6px rgba(52, 34, 24, 0.16);
  color: var(--color-accent);
  user-select: text;
  cursor: text;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.campaign-title:focus {
  background: var(--color-action-highlight);
  outline: none;
  white-space: normal;
}

.campaign-header-actions {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.campaign-delete {
  font-size: 0.9rem;
  padding: 5px 10px;
}

.mission-block {
  display: flex;
  flex-direction: column;
  gap: 5px;
  padding: 0;
}

.mission-editor {
  min-height: 30px;
  max-height: 52px;
  overflow-y: auto;
  padding: 5px 8px 5px 10px;
  border-radius: var(--radius-s);
  border-left: 2px solid rgba(45, 30, 22, 0.32);
  background: rgba(45, 30, 22, 0.08);
  outline: none;
  font-family: var(--font-body);
  font-size: 0.96rem;
  line-height: 1.42;
  color: var(--color-ink);
  user-select: text;
  cursor: text;
}

.mission-block[data-empty="true"] .mission-editor {
  background: rgba(45, 30, 22, 0.045);
  border-left-color: rgba(45, 30, 22, 0.2);
}

.mission-editor:focus {
  background: rgba(45, 30, 22, 0.13);
  border-left-color: rgba(45, 30, 22, 0.44);
}

.mission-editor[data-empty="true"]::before {
  content: "What's the next mission?";
  color: var(--color-ink-muted);
}

.projects-block {
  /* Projects are framed as a folio zone so execution work reads as the card's main payload. */
  display: flex;
  flex-direction: column;
  gap: 8px;
  /* Keep project content anchored toward the top rather than vertically centered in tall cards. */
  flex: 0 0 auto;
  margin-top: 4px;
  padding: 8px 10px 9px;
  border-radius: var(--radius-m);
  background: linear-gradient(to bottom, var(--color-project-band) 0%, rgba(255, 251, 244, 0.38) 100%);
  box-shadow: inset 0 0 0 1px rgba(28, 19, 14, 0.12);
}

.projects-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--space-2);
  margin-bottom: 1px;
}

.projects-header::after {
  content: "";
  flex: 1;
  height: 1px;
  background: rgba(35, 24, 17, 0.18);
  margin-left: 2px;
}

.projects-label {
  margin: 0;
  color: var(--color-project-ink-strong);
  font-family: var(--font-heading);
  font-size: 0.86rem;
  font-weight: 790;
  letter-spacing: 0.19em;
  text-transform: uppercase;
  font-variant-caps: all-small-caps;
}

.projects-add-icon {
  width: 20px;
  min-width: 20px;
  height: 20px;
  padding: 0;
  border: 0;
  color: var(--color-project-ink-strong);
  background: transparent;
  font-size: 0.88rem;
  font-weight: 560;
  line-height: 1;
  border-radius: var(--radius-s);
  opacity: 0.72;
  transition: background-color var(--project-motion-duration) var(--project-motion-ease), opacity var(--project-motion-duration) var(--project-motion-ease);
}

.projects-add-icon:hover:not(:disabled) {
  background: var(--color-project-band-strong);
  opacity: 1;
  border-color: transparent;
}

.projects-list {
  min-height: 56px;
  flex: 0 0 auto;
  /* We intentionally avoid internal scrolling so the campaign card grows with project volume. */
  overflow-y: visible;
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 7px;
  align-content: start;
  padding-right: 0;
  max-height: none;
}

.projects-empty {
  margin: 0;
  grid-column: 1 / -1;
  color: var(--color-ink);
  font-size: 1.02rem;
  line-height: 1.5;
  opacity: 0.84;
}

/* Rows use an ink rail and framed backdrop so projects stay legible under heavy campaign density. */
.campaign-project-row {
  position: relative;
  border-left: 1.5px solid var(--color-project-rail);
  border-radius: var(--radius-s);
  padding: 2px 2px 2px 8px;
  background: rgba(33, 23, 18, 0.04);
  transition: background-color var(--project-motion-duration) var(--project-motion-ease);
}

.project-launch {
  position: relative;
  isolation: isolate;
  width: 100%;
  border: 0;
  padding-right: 34px;
  padding-top: 6px;
  padding-bottom: 6px;
  text-align: left;
  /* Project names are emphasized through weight plus a whisper of contrast shadow, not larger sizing. */
  color: var(--color-project-ink-strong);
  font-size: 1.03rem;
  font-weight: 700;
  letter-spacing: 0.003em;
  text-shadow: 0 1px 0 rgba(255, 248, 238, 0.46);
  line-height: 1.4;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  background: transparent;
  transition: transform var(--project-motion-duration) var(--project-motion-ease), color var(--project-motion-duration) var(--project-motion-ease);
}

/* Project chips are rendered as highlighter strokes so they feel textual, not button-box UI. */
.project-launch::before {
  content: "";
  position: absolute;
  left: 0;
  right: 28px;
  top: 52%;
  height: 78%;
  transform: translateY(-50%) rotate(-0.24deg);
  border-radius: 3px;
  background: var(--color-project-highlight);
  pointer-events: none;
  z-index: -1;
  transition: background-color var(--project-motion-duration) var(--project-motion-ease);
}

.project-launch:hover::before,
.project-launch:focus-visible::before {
  background: var(--color-project-highlight-strong);
}

.campaign-project-row:hover {
  background: rgba(33, 23, 18, 0.06);
}

.project-launch:hover,
.project-launch:focus-visible {
  transform: translateY(-0.5px);
}

.project-launch:active {
  transform: translateY(0);
}

.project-launch.is-physical {
  text-decoration: underline dotted rgba(28, 18, 13, 0.62);
  text-underline-offset: 2px;
}

.project-launch[data-tip-visible="true"]::after {
  content: attr(data-tip);
  position: absolute;
  left: 8px;
  top: calc(100% + 4px);
  border-radius: var(--radius-s);
  background: #eee4d5;
  color: var(--color-project-ink-strong);
  font-size: 0.8rem;
  font-weight: 500;
  line-height: 1.2;
  white-space: nowrap;
  padding: 5px 7px;
  pointer-events: none;
  z-index: 2;
  border: 1px solid rgba(35, 24, 17, 0.18);
}

.project-edit-icon {
  position: absolute;
  top: 50%;
  right: 8px;
  transform: translateY(-50%);
  width: 20px;
  min-width: 20px;
  height: 20px;
  border: 0;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--color-project-ink-strong);
  background: rgba(33, 23, 18, 0.04);
  border-radius: var(--radius-s);
  opacity: 0.74;
  transition: background-color var(--project-motion-duration) var(--project-motion-ease), opacity var(--project-motion-duration) var(--project-motion-ease);
}

.campaign-project-row:hover .project-edit-icon,
.project-edit-icon:focus-visible {
  opacity: 0.95;
}

.project-edit-icon:hover:not(:disabled) {
  background: var(--color-project-band-strong);
  opacity: 1;
  border-color: transparent;
}

.project-edit-glyph {
  width: 11px;
  height: 11px;
  stroke: currentColor;
  fill: none;
  stroke-width: 1.4;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.campaign-slot-empty {
  border-style: none;
  background: rgba(43, 29, 21, 0.04);
  justify-content: center;
  align-items: flex-start;
}

.empty-slot-title {
  margin: 0;
  font-family: var(--font-heading);
  font-size: 1.65rem;
  font-weight: 780;
  line-height: 1.1;
  letter-spacing: 0.02em;
  color: var(--color-accent);
}

.empty-slot-body {
  margin: 0;
  color: var(--color-ink-muted);
  font-size: 0.98rem;
  line-height: 1.6;
}

.empty-slot-create {
  margin-top: 2px;
}

/* Panel stays practical but inherits the same editorial rhythm as the board. */
#panel-root {
  position: absolute;
  z-index: 40;
  right: var(--space-4);
  bottom: var(--space-2);
  width: min(430px, calc(100% - 40px));
  border-radius: var(--radius-l);
  border: 1px solid rgba(26, 17, 12, 0.16);
  background: #e3d8c9;
  padding: var(--space-4);
  box-shadow: 0 18px 38px rgba(37, 25, 18, 0.23), 0 0 1px rgba(40, 28, 20, 0.2);
  /* We constrain panel height to the visible viewport so long forms scroll internally instead of clipping above the window. */
  max-height: calc(100vh - 20px);
  max-height: calc(100dvh - 20px);
  overflow-y: auto;
  overscroll-behavior: contain;
}

#panel-root[hidden] {
  display: none;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-3);
}

.panel-header h3 {
  margin: 0;
  font-family: var(--font-heading);
  font-size: 1.25rem;
  font-weight: 760;
  line-height: 1.15;
  letter-spacing: 0.025em;
  color: var(--color-accent);
}

.panel-close {
  font-size: 0.9rem;
  padding: 6px 9px;
}

.panel-field {
  display: flex;
  flex-direction: column;
  gap: 5px;
  margin-bottom: var(--space-3);
}

.panel-field label {
  font-family: var(--font-ui);
  color: var(--color-ink-muted);
  font-size: 0.74rem;
  font-weight: 650;
  text-transform: uppercase;
  letter-spacing: 0.11em;
}

.panel-field input,
.panel-field select,
.panel-field textarea {
  width: 100%;
  border: 1px solid var(--color-line-strong);
  border-radius: var(--radius-s);
  padding: 8px 10px;
  font-family: var(--font-body);
  font-size: 0.92rem;
  line-height: 1.5;
  color: var(--color-ink);
  background: rgba(255, 250, 243, 0.62);
}

.panel-field textarea {
  min-height: 74px;
  resize: vertical;
}

.panel-field small {
  color: var(--color-ink-muted);
  line-height: 1.5;
}

.checkbox-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(148px, 1fr));
  gap: 7px;
  max-height: 140px;
  overflow-y: auto;
  padding: 2px;
}

.checkbox-chip {
  display: flex;
  align-items: center;
  gap: 6px;
  border: 1px solid var(--color-line);
  border-radius: var(--radius-s);
  background: rgba(255, 249, 240, 0.56);
  padding: 5px 9px;
}

.checkbox-chip input {
  width: auto;
  margin: 0;
}

.helper-row {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.helper-row input {
  flex: 1;
}

.panel-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-2);
  margin-top: var(--space-3);
}

.panel-error {
  min-height: 18px;
  margin: 6px 0 0;
  color: #6f3022;
  font-size: 0.88rem;
  line-height: 1.45;
}

.panel-note {
  margin: 10px 0;
  color: var(--color-ink-muted);
  font-size: 0.88rem;
  line-height: 1.55;
}

.panel-warning {
  margin: 10px 0;
  border-radius: var(--radius-m);
  border: 1px solid rgba(38, 25, 18, 0.18);
  background: rgba(38, 25, 18, 0.06);
  padding: 10px 12px;
}

.panel-warning h4 {
  margin: 0;
  color: var(--color-accent);
  font-size: 0.94rem;
  line-height: 1.35;
}

.panel-warning p {
  margin: 7px 0 0;
  color: var(--color-ink);
  font-size: 0.88rem;
  line-height: 1.45;
}

.destructive-action {
  border-color: rgba(120, 58, 46, 0.5);
  color: #7b3f33;
  background: rgba(120, 58, 46, 0.08);
}

.destructive-action:hover {
  background: rgba(120, 58, 46, 0.14);
}

@media (max-width: 1320px) {
  #canvas {
    gap: 20px;
  }
}

@media (max-width: 980px) {
  :root {
    --sidebar-open-width: 190px;
    --campaign-card-min-width: 250px;
  }

  #app-shell {
    padding: 4px 6px 0;
    gap: var(--space-4);
  }

  .brand-block h1 {
    font-size: 1.18rem;
  }

  .brand-block p {
    font-size: 0.74rem;
  }

  .campaign-title {
    font-size: 1.5rem;
  }
}

@media (max-width: 760px) {
  :root {
    --sidebar-open-width: 170px;
    --campaign-card-min-width: 180px;
  }

  #canvas {
    /* Keep two columns on narrow widths while allowing cards to respect their reduced minimum width. */
    grid-template-columns: repeat(2, minmax(var(--campaign-card-min-width), 1fr));
    grid-auto-rows: minmax(190px, auto);
    overflow-y: auto;
  }

  #panel-root {
    width: min(430px, calc(100% - 24px));
    right: var(--space-3);
    bottom: var(--space-3);
  }

}
